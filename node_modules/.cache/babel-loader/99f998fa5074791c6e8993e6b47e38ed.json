{"ast":null,"code":"var _jsxFileName = \"/home/meina/Documents/Share-It/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport Post from './Post';\nimport Logo from \"./logo.svg\";\nimport './App.css';\nimport { db, auth } from './Firebase';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport { Button, Input, handleLogin } from '@material-ui/core';\nimport UploadImage from './UploadImage';\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\n\nfunction App() {\n  const classes = useStyles();\n  const [modalStyle] = React.useState(getModalStyle);\n  const [posts, setPosts] = useState([{\n    /*\n     username:\"Hypedinburgh\",\n     caption: \"Social distancing each letters cause why not?\",\n     imageUrl: Logo\n    },\n    {\n     username: \"Lina\", \n     caption: \"Waaaaa cute kitties\",\n     imageUrl: \"https://news.cgtn.com/news/77416a4e3145544d326b544d354d444d3355444f31457a6333566d54/img/37d598e5a04344da81c76621ba273915/37d598e5a04344da81c76621ba273915.jpg\"\n    */\n  }]);\n  const [open, setOpen] = useState(false); // default value is false\n\n  const [openLogIn, setOpenLogIn] = useState(false);\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    // treat this listener as the frontend listener\n    // treat everything below as the backend listener\n    const unsubscribe = auth.onAuthStateChanged(authUser => {\n      // auth.OnAuthStateChanged is a listerner and each time a change is made, it will run the folowung code.\n      if (authUser) {\n        // user is logged in.\n        console.log(authUser);\n        setUser(authUser); // it will not be affected when the website refreshes because of cookies because of auth.onAuthStateChanged\n      } else {\n        // user is logged out.\n        setUser(null); // if the user is logged out, set the user back to null.\n      }\n    });\n    return () => {\n      // if the useEffect is run again, performs some cleanup before the run is re-run.\n      unsubscribe();\n    };\n  }, [user, username]); // useEffect runs a piece of code based on a specific condition. For e.g: runs code when teh page refreshes\n\n  useEffect(() => {\n    // onSnapshot: every time a new post is added to the database, it is going to update and the code below will run.\n    db.collection('posts').onSnapshot(snapshot => {\n      // map: a function that loops through every doc, just like a for-loop\n      // data: all the properties of the document. In this case- caption, username, imageUrl\n      setPosts(snapshot.docs.map(doc => ({\n        id: doc.id,\n        post: doc.data()\n      })));\n    });\n  }, []);\n\n  const register = event => {\n    event.preventDefault();\n    auth.createUserWithEmailAndPassword(email, password).then(authUser => {\n      return authUser.user.updateProfile({\n        displayName: username\n      });\n    }).catch(error => alert(error.message));\n    setOpen(false);\n  };\n\n  const logIn = event => {\n    event.preventDefault();\n    auth.signInWithEmailAndPassword(email, password).catch(error => alert(error.message));\n    setOpenLogIn(false);\n  };\n\n  {\n    /* \n     [] is variable and if we leave it blank, this means that the code will run once\n     when the App component loads, and will not run again.\n      [posts] means that the App component will run one time and run again when the details of posts changes\n    */\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }, (user === null || user === void 0 ? void 0 : user.displayName) ?\n  /*#__PURE__*/\n  // the ? is an optional, basically a try catch statement\n  React.createElement(UploadImage, {\n    username: user.displayName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, \"Login to upload an image\"), /*#__PURE__*/React.createElement(Modal, {\n    open: openLogIn,\n    onClose: () => setOpenLogIn(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__register__login__welcometext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, \"Welcome back to SHARE IT! \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 39\n    }\n  }), \"It's nice to see you again \\uD83D\\uDE04\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"app__register__login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"email\",\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: logIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  }, \"Submit\"))))), /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: () => setOpen(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__register__login__welcometext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, \"Welcome to SHARE IT \\u2728 \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 35\n    }\n  }), \"Please complete the form below to become a member.\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"app__register__login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"username\",\n    type: \"text\",\n    value: username,\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"email\",\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, \"Submit\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"app__header__Image\",\n    src: Logo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }\n  }, user ? /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#eae7dc\"\n    },\n    onClick: () => auth.signOut(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }, \"Log Out\") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__LogIn__Register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#eae7dc\"\n    },\n    onClick: () => setOpenLogIn(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }, \"Log In\"), /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#eae7dc\"\n    },\n    onClick: () => setOpen(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 11\n    }\n  }, \"Register\")))), posts.map(post => /*#__PURE__*/React.createElement(Post, {\n    username: post.username,\n    caption: post.caption,\n    imageUrl: post.imageUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 11\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/meina/Documents/Share-It/src/App.js"],"names":["React","useState","useEffect","Post","db","auth","makeStyles","Modal","Button","Input","handleLogin","UploadImage","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","App","classes","modalStyle","posts","setPosts","open","setOpen","openLogIn","setOpenLogIn","username","setUsername","email","setEmail","password","setPassword","user","setUser","unsubscribe","onAuthStateChanged","authUser","console","log","collection","onSnapshot","snapshot","docs","map","doc","id","post","data","register","event","preventDefault","createUserWithEmailAndPassword","then","updateProfile","displayName","catch","error","alert","message","logIn","signInWithEmailAndPassword","e","target","value","Logo","fontSize","color","signOut","caption","imageUrl"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Post from './Post';\nimport Logo from \"./logo.svg\";\nimport './App.css';\nimport { db, auth } from './Firebase';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport { Button, Input, handleLogin } from '@material-ui/core';\nimport UploadImage from './UploadImage'\n\n\nfunction getModalStyle() {\n  const top = 50\n  const left = 50\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`,\n  };\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nfunction App() {\n\n  const classes = useStyles();\n  const [modalStyle] = React.useState(getModalStyle);\n  const [posts, setPosts] = useState([\n    {/*\n      username:\"Hypedinburgh\",\n      caption: \"Social distancing each letters cause why not?\",\n      imageUrl: Logo\n    },\n    {\n      username: \"Lina\", \n      caption: \"Waaaaa cute kitties\",\n      imageUrl: \"https://news.cgtn.com/news/77416a4e3145544d326b544d354d444d3355444f31457a6333566d54/img/37d598e5a04344da81c76621ba273915/37d598e5a04344da81c76621ba273915.jpg\"\n    */}\n  ]);\n\n  const[open, setOpen] = useState(false); // default value is false\n  const[openLogIn, setOpenLogIn] = useState(false);\n  const[username, setUsername] = useState(''); \n  const[email, setEmail] = useState('');\n  const[password, setPassword] = useState('');\n  const[user, setUser] = useState(null);\n\n\n  useEffect(()=>{ // treat this listener as the frontend listener\n    // treat everything below as the backend listener\n    const unsubscribe = auth.onAuthStateChanged((authUser) => { \n      // auth.OnAuthStateChanged is a listerner and each time a change is made, it will run the folowung code.\n      if (authUser) {\n        // user is logged in.\n        console.log(authUser);\n        setUser(authUser); // it will not be affected when the website refreshes because of cookies because of auth.onAuthStateChanged\n      } else {\n        // user is logged out.\n        setUser(null); // if the user is logged out, set the user back to null.\n      }\n    }) \n\n    return () => {\n      // if the useEffect is run again, performs some cleanup before the run is re-run.\n      unsubscribe();\n    }\n\n  }, [user, username]);\n\n  // useEffect runs a piece of code based on a specific condition. For e.g: runs code when teh page refreshes\n  useEffect(()=> {\n    \n    // onSnapshot: every time a new post is added to the database, it is going to update and the code below will run.\n    db.collection('posts').onSnapshot(snapshot => {\n      // map: a function that loops through every doc, just like a for-loop\n      // data: all the properties of the document. In this case- caption, username, imageUrl\n      setPosts(snapshot.docs.map(doc => ({\n        id: doc.id,\n        post: doc.data(),\n      }))); \n    })\n\n  }, []);\n\n  const register = (event) => {\n    event.preventDefault();\n\n    auth\n    .createUserWithEmailAndPassword(email,password)\n    .then((authUser) => {\n      return authUser.user.updateProfile({\n        displayName: username\n      })\n    })\n    .catch((error) => alert(error.message))\n\n    setOpen(false);\n  };\n\n  const logIn = (event) => {\n    event.preventDefault();\n    \n    auth\n    .signInWithEmailAndPassword(email, password)\n    .catch((error) => alert(error.message))\n\n    setOpenLogIn(false);\n  };\n\n  {/* \n    [] is variable and if we leave it blank, this means that the code will run once\n    when the App component loads, and will not run again.\n\n    [posts] means that the App component will run one time and run again when the details of posts changes\n*/}\n\n  return (\n    <div className=\"app\">\n\n      {user?.displayName ? ( // the ? is an optional, basically a try catch statement\n        <UploadImage username={user.displayName}/>\n      ) : (\n        <h3>Login to upload an image</h3>\n      )}\n      \n\n      <Modal\n        open={openLogIn}\n        onClose={() => setOpenLogIn(false)}\n      >\n      \n      <div style={modalStyle} className={classes.paper}>\n        <center>\n          <div className=\"app__register__login__welcometext\">\n            Welcome back to SHARE IT! <br></br>\n            It's nice to see you again 😄\n          </div>\n        <form className=\"app__register__login\">\n          <Input\n            placeholder=\"email\"\n            type=\"text\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n          />\n\n          <Input\n            placeholder=\"password\"\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          <br></br>\n          <Button type=\"submit\" onClick={logIn}>Submit</Button>\n\n        </form>\n        </center>\n      </div>\n \n      </Modal>\n\n      <Modal\n        open={open}\n        onClose={() => setOpen(false)}\n      >\n      \n      <div style={modalStyle} className={classes.paper}>\n        <center>\n          <div className=\"app__register__login__welcometext\">\n            Welcome to SHARE IT ✨ <br></br>\n            Please complete the form below to become a member.\n          </div>\n          <form className=\"app__register__login\">\n            <Input\n              placeholder=\"username\"\n              type=\"text\"\n              value={username}\n              onChange={(e) => setUsername(e.target.value)}\n            />\n\n            <Input\n              placeholder=\"email\"\n              type=\"text\"\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n            />\n\n            <Input\n              placeholder=\"password\"\n              type=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n            />\n\n            <br></br>\n\n            <Button type=\"submit\" onClick={register}>Submit</Button>\n          </form>\n        </center>\n      </div>\n \n      </Modal>\n\n      {/* Header */}\n      <div className=\"app__header\">\n        <img \n          className=\"app__header__Image\"\n          src={Logo}\n          alt=\"\"\n        />\n\n      <div className=\"nav\">\n\n      { user ? (\n        <Button \n          style={{\n            fontSize: \"15px\",\n            color: \"#eae7dc\"\n          }}\n          onClick={() => auth.signOut()}\n        >\n          Log Out\n        </Button>\n      ) : (\n        <div className=\"app__LogIn__Register\">\n          <Button \n            style={{\n              fontSize: \"15px\",\n              color: \"#eae7dc\"\n            }}\n            onClick={() => setOpenLogIn(true)}\n          >\n            Log In\n          </Button>\n          <Button \n            style={{\n              fontSize: \"15px\",\n              color: \"#eae7dc\"\n            }}\n            onClick={() => setOpen(true)}\n          >\n            Register\n          </Button>\n        </div>\n      )}\n      </div>\n      </div>\n\n      {\n        posts.map(post => (\n          <Post username={post.username} caption={post.caption} imageUrl={post.imageUrl}/>\n        ))\n      }\n\n      {/*\n        Hypedinburgh\" caption=\"Social distancing each letters cause why not?\" imageUrl={Logo}/>\n        <Post username=\"Lina\" caption=\"Waaaaa cute kitties\" imageUrl={Cat}/>\n      */}\n\n\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}