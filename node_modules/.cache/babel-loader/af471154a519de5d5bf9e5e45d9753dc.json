{"ast":null,"code":"var _jsxFileName = \"/home/meina/Documents/Share-It/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport Post from './Post';\nimport Logo from \"./logo.svg\";\nimport './App.css';\nimport { db, auth } from './Firebase';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport { Button, Input, handleLogin } from '@material-ui/core';\nimport UploadImage from './UploadImage';\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\n\nfunction App() {\n  const classes = useStyles(); // Modal States\n\n  const [modalStyle] = useState(getModalStyle);\n  const [posts, setPosts] = useState([]);\n  const [open, setOpen] = useState(false); // default value is false\n\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [user, setUser] = useState(null);\n  const [openLogIn, setOpenLogIn] = useState(false);\n  useEffect(() => {\n    // treat this listener as the frontend listener\n    // treat everything below as the backend listener\n    const unsubscribe = auth.onAuthStateChanged(authUser => {\n      // auth.OnAuthStateChanged is a listerner and each time a change is made, it will run the folowung code.\n      if (authUser) {\n        // user is logged in.\n        console.log(authUser);\n        setUser(authUser); // it will not be affected when the website refreshes because of cookies because of auth.onAuthStateChanged\n      } else {\n        // user is logged out.\n        setUser(null); // if the user is logged out, set the user back to null.\n      }\n    });\n    return () => {\n      // if the useEffect is run again, performs some cleanup before the run is re-run.\n      unsubscribe();\n    };\n  }, [user, username]); // useEffect runs a piece of code based on a specific condition. For e.g: runs code when teh page refreshes\n\n  useEffect(() => {\n    // onSnapshot: every time a new post is added to the database, it is going to update and the code below will run.\n    db.collection('posts').orderBy(\"timestamp\", \"desc\").onSnapshot(snapshot => {\n      // map: a function that loops through every doc, just like a for-loop\n      // data: all the properties of the document. In this case- caption, username, imageUrl\n      setPosts(snapshot.docs.map(doc => ({\n        id: doc.id,\n        post: doc.data()\n      })));\n    });\n  }, []);\n\n  const register = event => {\n    event.preventDefault();\n    auth.createUserWithEmailAndPassword(email, password).then(authUser => {\n      return authUser.user.updateProfile({\n        displayName: username\n      });\n    }).catch(error => alert(error.message));\n    setOpen(false);\n  };\n\n  const logIn = event => {\n    event.preventDefault();\n    auth.signInWithEmailAndPassword(email, password).catch(error => alert(error.message));\n    setOpenLogIn(false);\n    setEmail(\"\");\n    setPassword(\"\");\n  };\n\n  {\n    /* \n       [] is variable and if we leave it blank, this means that the code will run once\n       when the App component loads, and will not run again.\n        [posts] means that the App component will run one time and run again when the details of posts changes\n    */\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    open: openLogIn,\n    onClose: () => setOpenLogIn(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__register__login__welcometext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, \"Welcome back to SHARE IT! \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 43\n    }\n  }), \"It's nice to see you again \\uD83D\\uDE04\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"app__register__login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"email\",\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: logIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, \"Submit\"))))), /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: () => setOpen(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__register__login__welcometext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, \"Welcome to SHARE IT \\u2728 \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 39\n    }\n  }), \"Please complete the form below to become a member.\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"app__register__login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"username\",\n    type: \"text\",\n    value: username,\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"email\",\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }, \"Submit\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"app__header__Image\",\n    src: Logo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 9\n    }\n  }, user ? /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#eae7dc\"\n    },\n    onClick: () => auth.signOut(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }, \"Log Out\") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__LogIn__Register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#eae7dc\"\n    },\n    onClick: () => setOpenLogIn(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }\n  }, \"Log In\"), /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#eae7dc\"\n    },\n    onClick: () => setOpen(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }\n  }, \"Register\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }, (user === null || user === void 0 ? void 0 : user.displayName) ?\n  /*#__PURE__*/\n  // the ? is an optional, basically a try catch statement\n  React.createElement(UploadImage, {\n    username: user.displayName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  }, \"Login to upload an image\")), posts.map(({\n    id,\n    post\n  }) => /*#__PURE__*/React.createElement(Post, {\n    key: \"id\",\n    username: post.username,\n    caption: post.caption,\n    imageUrl: post.imageUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/meina/Documents/Share-It/src/App.js"],"names":["React","useState","useEffect","Post","db","auth","makeStyles","Modal","Button","Input","handleLogin","UploadImage","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","App","classes","modalStyle","posts","setPosts","open","setOpen","username","setUsername","email","setEmail","password","setPassword","user","setUser","openLogIn","setOpenLogIn","unsubscribe","onAuthStateChanged","authUser","console","log","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","post","data","register","event","preventDefault","createUserWithEmailAndPassword","then","updateProfile","displayName","catch","error","alert","message","logIn","signInWithEmailAndPassword","e","target","value","Logo","fontSize","color","signOut","caption","imageUrl"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Post from './Post';\nimport Logo from \"./logo.svg\";\nimport './App.css';\nimport { db, auth } from './Firebase';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport { Button, Input, handleLogin } from '@material-ui/core';\nimport UploadImage from './UploadImage'\n\n\nfunction getModalStyle() {\n    const top = 50\n    const left = 50\n\n    return {\n        top: `${top}%`,\n        left: `${left}%`,\n        transform: `translate(-${top}%, -${left}%)`,\n    };\n}\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        position: 'absolute',\n        width: 400,\n        backgroundColor: theme.palette.background.paper,\n        border: '2px solid #000',\n        boxShadow: theme.shadows[5],\n        padding: theme.spacing(2, 4, 3),\n    },\n}));\n\nfunction App() {\n\n    const classes = useStyles();\n\n    // Modal States\n    const [modalStyle] = useState(getModalStyle);\n    const [posts, setPosts] = useState([]);\n    const [open, setOpen] = useState(false); // default value is false\n\n    const [username, setUsername] = useState(''); \n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [user, setUser] = useState(null);\n\n    const [openLogIn, setOpenLogIn] = useState(false);\n\n    useEffect(()=>{ // treat this listener as the frontend listener\n        // treat everything below as the backend listener\n        const unsubscribe = auth.onAuthStateChanged((authUser) => { \n        // auth.OnAuthStateChanged is a listerner and each time a change is made, it will run the folowung code.\n        if (authUser) {\n            // user is logged in.\n            console.log(authUser);\n            setUser(authUser); // it will not be affected when the website refreshes because of cookies because of auth.onAuthStateChanged\n        } else {\n            // user is logged out.\n            setUser(null); // if the user is logged out, set the user back to null.\n        }\n        }) \n\n        return () => {\n        // if the useEffect is run again, performs some cleanup before the run is re-run.\n        unsubscribe();\n        }\n\n    }, [user, username]);\n\n    // useEffect runs a piece of code based on a specific condition. For e.g: runs code when teh page refreshes\n    useEffect(()=> {\n        \n        // onSnapshot: every time a new post is added to the database, it is going to update and the code below will run.\n        db.collection('posts').orderBy(\"timestamp\", \"desc\").onSnapshot(snapshot => {\n        // map: a function that loops through every doc, just like a for-loop\n        // data: all the properties of the document. In this case- caption, username, imageUrl\n            setPosts(snapshot.docs.map(doc => ({\n                id: doc.id,\n                post: doc.data()\n            }))); \n        })\n\n    }, []);\n\n    const register = (event) => {\n        event.preventDefault();\n\n        auth\n        .createUserWithEmailAndPassword(email,password)\n        .then((authUser) => {\n            return authUser.user.updateProfile({\n                displayName: username\n            })\n        })\n        .catch((error) => alert(error.message))\n\n        setOpen(false);\n    };\n\n    const logIn = (event) => {\n        event.preventDefault();\n        \n        auth\n        .signInWithEmailAndPassword(email, password)\n        .catch((error) => alert(error.message))\n\n        setOpenLogIn(false);\n        setEmail(\"\");\n        setPassword(\"\");\n    };\n\n    {/* \n        [] is variable and if we leave it blank, this means that the code will run once\n        when the App component loads, and will not run again.\n\n        [posts] means that the App component will run one time and run again when the details of posts changes\n    */}\n\n    return (\n        <div className=\"app\">\n\n        <Modal\n            open={openLogIn}\n            onClose={() => setOpenLogIn(false)}\n        >\n        \n        <div style={modalStyle} className={classes.paper}>\n            <center>\n            <div className=\"app__register__login__welcometext\">\n                Welcome back to SHARE IT! <br></br>\n                It's nice to see you again 😄\n            </div>\n            <form className=\"app__register__login\">\n            <Input\n                placeholder=\"email\"\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n            />\n\n            <Input\n                placeholder=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n            />\n            <br></br>\n            <Button type=\"submit\" onClick={logIn}>Submit</Button>\n\n            </form>\n            </center>\n        </div>\n    \n        </Modal>\n\n        <Modal\n            open={open}\n            onClose={() => setOpen(false)}\n        >\n        \n        <div style={modalStyle} className={classes.paper}>\n            <center>\n            <div className=\"app__register__login__welcometext\">\n                Welcome to SHARE IT ✨ <br></br>\n                Please complete the form below to become a member.\n            </div>\n            <form className=\"app__register__login\">\n                <Input\n                placeholder=\"username\"\n                type=\"text\"\n                value={username}\n                onChange={(e) => setUsername(e.target.value)}\n                />\n\n                <Input\n                placeholder=\"email\"\n                type=\"text\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                />\n\n                <Input\n                placeholder=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                />\n\n                <br></br>\n\n                <Button type=\"submit\" onClick={register}>Submit</Button>\n            </form>\n            </center>\n        </div>\n    \n        </Modal>\n\n        {/* Header */}\n        <div className=\"app__header\">\n            <img \n            className=\"app__header__Image\"\n            src={Logo}\n            alt=\"\"\n            />\n\n        <div className=\"nav\">\n\n        { user ? (\n            <Button \n            style={{\n                fontSize: \"15px\",\n                color: \"#eae7dc\"\n            }}\n            onClick={() => auth.signOut()}\n            >\n            Log Out\n            </Button>\n        ) : (\n            <div className=\"app__LogIn__Register\">\n            <Button \n                style={{\n                fontSize: \"15px\",\n                color: \"#eae7dc\"\n                }}\n                onClick={() => setOpenLogIn(true)}\n            >\n                Log In\n            </Button>\n            <Button \n                style={{\n                fontSize: \"15px\",\n                color: \"#eae7dc\"\n                }}\n                onClick={() => setOpen(true)}\n            >\n                Register\n            </Button>\n            </div>\n        )}\n        </div>\n        </div>\n\n        <div className=\"app__upload\">\n            {user?.displayName ? ( // the ? is an optional, basically a try catch statement\n            <UploadImage username={user.displayName}/>\n            ) : (\n            <h3>Login to upload an image</h3>\n            )}\n        </div>\n    \n        {\n            posts.map(({ id, post }) => (\n                <Post key=\"id\" username={post.username} caption={post.caption} imageUrl={post.imageUrl}/>\n            ))\n        }\n\n        {/*\n            Hypedinburgh\" caption=\"Social distancing each letters cause why not?\" imageUrl={Logo}/>\n            <Post username=\"Lina\" caption=\"Waaaaa cute kitties\" imageUrl={Cat}/>\n        */}\n\n\n        </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}