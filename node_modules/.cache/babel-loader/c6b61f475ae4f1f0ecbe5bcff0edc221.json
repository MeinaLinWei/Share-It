{"ast":null,"code":"var _jsxFileName = \"/home/meina/Documents/Share-It/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport Post from './post/Post';\nimport Logo from \"./images/logo.svg\";\nimport './App.css';\nimport { db, auth } from './Firebase';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport { Button, Input, handleLogin } from '@material-ui/core';\nimport UploadImage from './post/UploadImage';\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\n\nfunction App() {\n  const classes = useStyles(); // Modal States\n\n  const [modalStyle] = useState(getModalStyle);\n  const [posts, setPosts] = useState([]);\n  const [open, setOpen] = useState(false); // default value is false\n\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [user, setUser] = useState(null);\n  const [openLogIn, setOpenLogIn] = useState(false);\n  useEffect(() => {\n    // treat this listener as the frontend listener\n    // treat everything below as the backend listener\n    const unsubscribe = auth.onAuthStateChanged(authUser => {\n      // auth.OnAuthStateChanged is a listerner and each time a change is made, it will run the folowung code.\n      if (authUser) {\n        // user is logged in.\n        console.log(authUser);\n        setUser(authUser); // it will not be affected when the website refreshes because of cookies because of auth.onAuthStateChanged\n      } else {\n        // user is logged out.\n        setUser(null); // if the user is logged out, set the user back to null.\n      }\n    });\n    return () => {\n      // if the useEffect is run again, performs some cleanup before the run is re-run.\n      unsubscribe();\n    };\n  }, [user, username]); // useEffect runs a piece of code based on a specific condition. For e.g: runs code when teh page refreshes\n\n  useEffect(() => {\n    // onSnapshot: every time a new post is added to the database, it is going to update and the code below will run.\n    db.collection('posts').onSnapshot(snapshot => {\n      // map: a function that loops through every doc, just like a for-loop\n      // data: all the properties of the document. In this case- caption, username, imageUrl\n      setPosts(snapshot.docs.map(doc => doc.data()));\n    });\n  }, []);\n\n  const register = event => {\n    event.preventDefault();\n    auth.createUserWithEmailAndPassword(email, password).then(authUser => {\n      return authUser.user.updateProfile({\n        displayName: username\n      });\n    }).catch(error => alert(error.message));\n    setOpen(false);\n  };\n\n  const logIn = event => {\n    event.preventDefault();\n    auth.signInWithEmailAndPassword(email, password).catch(error => alert(error.message));\n    setOpenLogIn(false);\n  };\n\n  {\n    /* \n       [] is variable and if we leave it blank, this means that the code will run once\n       when the App component loads, and will not run again.\n        [posts] means that the App component will run one time and run again when the details of posts changes\n    */\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    open: openLogIn,\n    onClose: () => setOpenLogIn(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__login-register-welcome-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }, \"Welcome back to SHARE IT! \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 51\n    }\n  }), \"It's nice to see you again \\uD83D\\uDE04\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"app__login-register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"email\",\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: logIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, \"Submit\"))))), /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: () => setOpen(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__login-register-welcome-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, \"Welcome to SHARE IT \\u2728 \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 47\n    }\n  }), \"Please complete the form below to become a member.\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"app__login-register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"username\",\n    type: \"text\",\n    value: username,\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"email\",\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 25\n    }\n  }, \"Submit\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"app__header-image\",\n    src: Logo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }\n  }, user ? /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#eae7dc\"\n    },\n    onClick: () => auth.signOut(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, \"Log Out\") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__LogIn__Register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#eae7dc\"\n    },\n    onClick: () => setOpenLogIn(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }\n  }, \"Log In\"), /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#eae7dc\"\n    },\n    onClick: () => setOpen(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }\n  }, \"Register\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }\n  }, (user === null || user === void 0 ? void 0 : user.displayName) ?\n  /*#__PURE__*/\n  // the ? is an optional, basically a try catch statement\n  React.createElement(UploadImage, {\n    username: user.displayName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__login--to--upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  }, \" Login to upload an image \")), posts.map(post => /*#__PURE__*/React.createElement(Post, {\n    username: post.username,\n    caption: post.caption,\n    imageUrl: post.imageUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/meina/Documents/Share-It/src/App.js"],"names":["React","useState","useEffect","Post","db","auth","makeStyles","Modal","Button","Input","handleLogin","UploadImage","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","App","classes","modalStyle","posts","setPosts","open","setOpen","username","setUsername","email","setEmail","password","setPassword","user","setUser","openLogIn","setOpenLogIn","unsubscribe","onAuthStateChanged","authUser","console","log","collection","onSnapshot","snapshot","docs","map","doc","data","register","event","preventDefault","createUserWithEmailAndPassword","then","updateProfile","displayName","catch","error","alert","message","logIn","signInWithEmailAndPassword","e","target","value","Logo","fontSize","color","signOut","post","caption","imageUrl"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport Post from './post/Post';\nimport Logo from \"./images/logo.svg\";\nimport './App.css';\nimport { db, auth } from './Firebase';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport { Button, Input, handleLogin } from '@material-ui/core';\nimport UploadImage from './post/UploadImage'\n\n\nfunction getModalStyle() {\n    const top = 50\n    const left = 50\n\n    return {\n        top: `${top}%`,\n        left: `${left}%`,\n        transform: `translate(-${top}%, -${left}%)`,\n    };\n}\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        position: 'absolute',\n        width: 400,\n        backgroundColor: theme.palette.background.paper,\n        border: '2px solid #000',\n        boxShadow: theme.shadows[5],\n        padding: theme.spacing(2, 4, 3),\n    },\n}));\n\nfunction App() {\n\n    const classes = useStyles();\n\n    // Modal States\n    const [modalStyle] = useState(getModalStyle);\n    const [posts, setPosts] = useState([]);\n    const [open, setOpen] = useState(false); // default value is false\n\n    const [username, setUsername] = useState(''); \n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [user, setUser] = useState(null);\n\n    const [openLogIn, setOpenLogIn] = useState(false);\n\n    useEffect(()=>{ // treat this listener as the frontend listener\n        // treat everything below as the backend listener\n        const unsubscribe = auth.onAuthStateChanged((authUser) => { \n        // auth.OnAuthStateChanged is a listerner and each time a change is made, it will run the folowung code.\n        if (authUser) {\n            // user is logged in.\n            console.log(authUser);\n            setUser(authUser); // it will not be affected when the website refreshes because of cookies because of auth.onAuthStateChanged\n        } else {\n            // user is logged out.\n            setUser(null); // if the user is logged out, set the user back to null.\n        }\n        }) \n\n        return () => {\n        // if the useEffect is run again, performs some cleanup before the run is re-run.\n        unsubscribe();\n        }\n\n    }, [user, username]);\n\n    // useEffect runs a piece of code based on a specific condition. For e.g: runs code when teh page refreshes\n    useEffect(()=> {\n        \n        // onSnapshot: every time a new post is added to the database, it is going to update and the code below will run.\n        db.collection('posts').onSnapshot(snapshot => {\n        // map: a function that loops through every doc, just like a for-loop\n        // data: all the properties of the document. In this case- caption, username, imageUrl\n        setPosts(snapshot.docs.map(doc => doc.data())); \n        })\n\n    }, []);\n\n    const register = (event) => {\n        event.preventDefault();\n\n        auth\n        .createUserWithEmailAndPassword(email,password)\n        .then((authUser) => {\n        return authUser.user.updateProfile({\n            displayName: username\n        })\n        })\n        .catch((error) => alert(error.message))\n\n        setOpen(false);\n    };\n\n    const logIn = (event) => {\n        event.preventDefault();\n        \n        auth\n        .signInWithEmailAndPassword(email, password)\n        .catch((error) => alert(error.message))\n\n        setOpenLogIn(false);\n    };\n\n    {/* \n        [] is variable and if we leave it blank, this means that the code will run once\n        when the App component loads, and will not run again.\n\n        [posts] means that the App component will run one time and run again when the details of posts changes\n    */}\n\n    return (\n        <div className=\"app\">\n\n        <Modal\n            open={openLogIn}\n            onClose={() => setOpenLogIn(false)}\n        >\n        \n            <div style={modalStyle} className={classes.paper}>\n                <center>\n                    <div className=\"app__login-register-welcome-text\">\n                        Welcome back to SHARE IT! <br></br>\n                        It's nice to see you again 😄\n                    </div>\n                    <form className=\"app__login-register\">\n                        <Input\n                            placeholder=\"email\"\n                            type=\"text\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                        />\n\n                        <Input\n                            placeholder=\"password\"\n                            type=\"password\"\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                        />\n                        <br></br>\n\n                        <Button type=\"submit\" onClick={logIn}>Submit</Button>\n                    </form>\n                </center>\n            </div>\n\n        </Modal>\n\n        <Modal\n            open={open}\n            onClose={() => setOpen(false)}\n        >\n        \n            <div style={modalStyle} className={classes.paper}>\n                <center>\n                    <div className=\"app__login-register-welcome-text\">\n                        Welcome to SHARE IT ✨ <br></br>\n                        Please complete the form below to become a member.\n                    </div>\n                    <form className=\"app__login-register\">\n                        <Input\n                        placeholder=\"username\"\n                        type=\"text\"\n                        value={username}\n                        onChange={(e) => setUsername(e.target.value)}\n                        />\n\n                        <Input\n                        placeholder=\"email\"\n                        type=\"text\"\n                        value={email}\n                        onChange={(e) => setEmail(e.target.value)}\n                        />\n\n                        <Input\n                        placeholder=\"password\"\n                        type=\"password\"\n                        value={password}\n                        onChange={(e) => setPassword(e.target.value)}\n                        />\n                        <br></br>\n\n                        <Button type=\"submit\" onClick={register}>Submit</Button>\n                    </form>\n                </center>\n            </div>\n    \n        </Modal>\n\n        {/* Header */}\n        <div className=\"app__header\">\n            <img \n            className=\"app__header-image\"\n            src={Logo}\n            alt=\"\"\n            />\n\n        <div className=\"nav\">\n\n        { user ? (\n            <Button \n            style={{\n                fontSize: \"15px\",\n                color: \"#eae7dc\"\n            }}\n            onClick={() => auth.signOut()}\n            >\n            Log Out\n            </Button>\n        ) : (\n            <div className=\"app__LogIn__Register\">\n            <Button \n                style={{\n                fontSize: \"15px\",\n                color: \"#eae7dc\"\n                }}\n                onClick={() => setOpenLogIn(true)}\n            >\n                Log In\n            </Button>\n            <Button \n                style={{\n                fontSize: \"15px\",\n                color: \"#eae7dc\"\n                }}\n                onClick={() => setOpen(true)}\n            >\n                Register\n            </Button>\n            </div>\n        )}\n        </div>\n        </div>\n\n        <div className=\"app__upload\">\n            {user?.displayName ? ( // the ? is an optional, basically a try catch statement\n            <UploadImage username={user.displayName}/>\n            ) : (\n            <div className=\"app__login--to--upload\"> Login to upload an image </div>\n            )}\n        </div>\n    \n        {\n            posts.map(post => (\n            <Post username={post.username} caption={post.caption} imageUrl={post.imageUrl}/>\n            ))\n        }\n\n        {/*\n            Hypedinburgh\" caption=\"Social distancing each letters cause why not?\" imageUrl={Logo}/>\n            <Post username=\"Lina\" caption=\"Waaaaa cute kitties\" imageUrl={Cat}/>\n        */}\n\n\n        </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}