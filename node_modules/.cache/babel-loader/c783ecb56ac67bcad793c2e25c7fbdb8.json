{"ast":null,"code":"var _jsxFileName = \"/home/meina/Documents/Share-It/src/javascript/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport { db, auth } from './Firebase';\nimport '../css/App.css';\nimport Logo from \"../images/logo.svg\";\nimport Post from './Post';\nimport UploadImage from './UploadImage';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport { Button, Input } from '@material-ui/core';\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    width: 400,\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  }\n}));\n\nfunction App() {\n  const classes = useStyles();\n  const [modalStyle] = useState(getModalStyle);\n  const [posts, setPosts] = useState([]);\n  const [open, setOpen] = useState(false); // default value is false\n  // user registration and authentication using firebase\n\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [user, setUser] = useState(null); // default value is null\n\n  const [openLogIn, setOpenLogIn] = useState(false); // listener (front-end)\n\n  useEffect(() => {\n    // listener (back-end)\n    const unsubscribe = auth.onAuthStateChanged(authUser => {\n      // auth.OnAuthStateChanged is a listerner. Each time a change is made, it will run the folowung code.\n      if (authUser) {\n        // user is logged in\n        setUser(authUser); // it will not be affected when the website refreshes because of cookies and of auth.onAuthStateChanged\n      } else {\n        // user is logged out\n        setUser(null); // setUser back to null\n      }\n    });\n    return () => {\n      // if the useEffect is run again, performs some cleanup before the listener (back-end) is re-run\n      unsubscribe();\n    };\n  }, [user, username]); // useEffect runs a piece of code based on a specific condition. For e.g: runs code when teh page refreshes\n\n  useEffect(() => {\n    // onSnapshot: every time a new post is added to the database, it is going to update and the code below will run.\n    db.collection('posts').orderBy(\"timestamp\", \"desc\").onSnapshot(snapshot => {\n      // map: a function that loops through every doc, just like a for-loop\n      // data: all the properties of the document. In this case: caption, username, imageUrl\n      setPosts(snapshot.docs.map(doc => ({\n        id: doc.id,\n        post: doc.data()\n      })));\n    });\n  }, []);\n  {\n    /* \n       [] is variable and if we leave it blank, this means that the code will run once\n       when the App component loads, and will not run again.\n        [posts] means that the App component will run one time and run again when the details of posts changes\n    */\n  } // user registration using firebase\n\n  const register = event => {\n    event.preventDefault();\n    auth.createUserWithEmailAndPassword(email, password).then(authUser => {\n      return authUser.user.updateProfile({\n        displayName: username\n      });\n    }).catch(error => alert(error.message));\n    setOpen(false);\n  }; // user authentication/sigin using firebase\n\n\n  const logIn = event => {\n    event.preventDefault();\n    auth.signInWithEmailAndPassword(email, password).then(authUser => {}).catch(error => alert(error.message));\n    setOpenLogIn(false);\n    setEmail(\"\");\n    setPassword(\"\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    open: openLogIn,\n    onClose: () => setOpenLogIn(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__login-register-welcome-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, \"Welcome back to SHARE IT!\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }), \"It's nice to see you again \\uD83D\\uDE04\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"app__login-register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"email\",\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: logIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }, \"Submit\"))))), /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: () => setOpen(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"center\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__login-register-welcome-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, \"Welcome to SHARE IT \\u2728\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }), \"Please complete the form below to become a member.\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"app__login-register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"username\",\n    type: \"text\",\n    value: username,\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"email\",\n    type: \"text\",\n    value: email,\n    onChange: e => setEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 25\n    }\n  }, \"Submit\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 38\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"app__header-image\",\n    src: Logo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 49\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }, user ?\n  /*#__PURE__*/\n  // check if user is signed in or not. ? (...) : (...) is an if-else statement\n  React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#edeae5\"\n    },\n    onClick: () => auth.signOut(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 21\n    }\n  }, \"Log Out\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#edeae5\"\n    },\n    onClick: () => setOpenLogIn(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 25\n    }\n  }, \"Log In\"), /*#__PURE__*/React.createElement(Button, {\n    style: {\n      fontSize: \"15px\",\n      color: \"#edeae5\"\n    },\n    onClick: () => setOpen(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 25\n    }\n  }, \"Register\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app__upload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  }, (user === null || user === void 0 ? void 0 : user.displayName) ?\n  /*#__PURE__*/\n  // the ? is an optional, basically a try catch statement\n  React.createElement(UploadImage, {\n    username: user.displayName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 17\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }\n  })), posts.map(({\n    id,\n    post\n  }) => /*#__PURE__*/React.createElement(Post, {\n    key: id,\n    postId: id,\n    user: user,\n    username: post.username,\n    caption: post.caption,\n    imageUrl: post.imageUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 17\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/meina/Documents/Share-It/src/javascript/App.js"],"names":["React","useState","useEffect","db","auth","Post","UploadImage","makeStyles","Modal","Button","Input","getModalStyle","top","left","transform","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","App","classes","modalStyle","posts","setPosts","open","setOpen","username","setUsername","email","setEmail","password","setPassword","user","setUser","openLogIn","setOpenLogIn","unsubscribe","onAuthStateChanged","authUser","collection","orderBy","onSnapshot","snapshot","docs","map","doc","id","post","data","register","event","preventDefault","createUserWithEmailAndPassword","then","updateProfile","displayName","catch","error","alert","message","logIn","signInWithEmailAndPassword","e","target","value","Logo","fontSize","color","signOut","caption","imageUrl"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { db, auth } from './Firebase';\nimport '../css/App.css';\nimport Logo from \"../images/logo.svg\";\nimport Post from './Post';\nimport UploadImage from './UploadImage'\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport { Button, Input } from '@material-ui/core';\n\n\nfunction getModalStyle() {\n    const top = 50\n    const left = 50\n\n    return {\n        top: `${top}%`,\n        left: `${left}%`,\n        transform: `translate(-${top}%, -${left}%)`,\n    };\n}\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        position: 'absolute',\n        width: 400,\n        backgroundColor: theme.palette.background.paper,\n        border: '2px solid #000',\n        boxShadow: theme.shadows[5],\n        padding: theme.spacing(2, 4, 3),\n    },\n}));\n\nfunction App() {\n\n    const classes = useStyles();\n    const [modalStyle] = useState(getModalStyle);\n    const [posts, setPosts] = useState([]);\n    const [open, setOpen] = useState(false); // default value is false\n\n    // user registration and authentication using firebase\n    const [username, setUsername] = useState(''); \n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n\n    const [user, setUser] = useState(null); // default value is null\n\n    const [openLogIn, setOpenLogIn] = useState(false);\n\n\n    // listener (front-end)\n    useEffect(()=>{ \n        // listener (back-end)\n        const unsubscribe = auth.onAuthStateChanged((authUser) => { // auth.OnAuthStateChanged is a listerner. Each time a change is made, it will run the folowung code.\n            if (authUser) {\n                // user is logged in\n                setUser(authUser); // it will not be affected when the website refreshes because of cookies and of auth.onAuthStateChanged\n            } else {\n                // user is logged out\n                setUser(null); // setUser back to null\n            }\n        }) \n\n        return () => {\n        // if the useEffect is run again, performs some cleanup before the listener (back-end) is re-run\n            unsubscribe();\n        }\n    }, [user, username]);\n\n\n    // useEffect runs a piece of code based on a specific condition. For e.g: runs code when teh page refreshes\n    useEffect(()=> {\n        \n        // onSnapshot: every time a new post is added to the database, it is going to update and the code below will run.\n        db.collection('posts').orderBy(\"timestamp\", \"desc\").onSnapshot(snapshot => {\n        // map: a function that loops through every doc, just like a for-loop\n        // data: all the properties of the document. In this case: caption, username, imageUrl\n            setPosts(snapshot.docs.map(doc => ({\n                id: doc.id,\n                post: doc.data()\n            }))); \n        })\n    }, []);\n    {/* \n        [] is variable and if we leave it blank, this means that the code will run once\n        when the App component loads, and will not run again.\n\n        [posts] means that the App component will run one time and run again when the details of posts changes\n    */}\n\n\n    // user registration using firebase\n    const register = (event) => {\n        event.preventDefault();\n\n        auth\n        .createUserWithEmailAndPassword(email,password)\n        .then((authUser) => {\n            return authUser.user.updateProfile({\n                displayName: username\n            })\n        })\n        .catch((error) => alert(error.message))\n\n        setOpen(false);\n    };\n\n\n    // user authentication/sigin using firebase\n    const logIn = (event) => {\n        event.preventDefault();\n        \n        auth\n        .signInWithEmailAndPassword(email, password)\n        .then ((authUser) => {})\n        .catch((error) => alert(error.message))\n\n        setOpenLogIn(false);\n        setEmail(\"\");\n        setPassword(\"\");\n    };\n\n\n    return (\n        <div className=\"app\">\n\n        <Modal\n            open={openLogIn}\n            onClose={() => setOpenLogIn(false)}\n        >\n\n            {/* login form using modal from material.ui */}\n            <div style={modalStyle} className={classes.paper}>\n                <center>\n                    <div className=\"app__login-register-welcome-text\">\n                        Welcome back to SHARE IT! \n                        <br></br>\n                        It's nice to see you again ðŸ˜„\n                    </div>\n\n                    <form className=\"app__login-register\">\n                        <Input\n                            placeholder=\"email\"\n                            type=\"text\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                        />\n\n                        <Input\n                            placeholder=\"password\"\n                            type=\"password\"\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                        />\n                        <br></br>\n\n                        <Button type=\"submit\" onClick={logIn}>Submit</Button>\n                    </form>\n                </center>\n            </div>\n\n        </Modal>\n\n        <Modal\n            open={open}\n            onClose={() => setOpen(false)}\n        >\n        \n            {/* registration form using modal from material.ui */}\n            <div style={modalStyle} className={classes.paper}>\n                <center>\n                    <div className=\"app__login-register-welcome-text\">\n                        Welcome to SHARE IT âœ¨ \n                        <br></br>\n                        Please complete the form below to become a member.\n                    </div>\n\n                    <form className=\"app__login-register\">\n                        <Input\n                            placeholder=\"username\"\n                            type=\"text\"\n                            value={username}\n                            onChange={(e) => setUsername(e.target.value)}\n                        />\n\n                        <Input\n                            placeholder=\"email\"\n                            type=\"text\"\n                            value={email}\n                            onChange={(e) => setEmail(e.target.value)}\n                        />\n\n                        <Input\n                            placeholder=\"password\"\n                            type=\"password\"\n                            value={password}\n                            onChange={(e) => setPassword(e.target.value)}\n                        />\n                        <br></br>\n\n                        <Button type=\"submit\" onClick={register}>Submit</Button>\n                    </form>\n                </center>\n            </div>\n    \n        </Modal>\n\n        {/* Header */}\n        <div className=\"app__header\"><a href=\"\"><img className=\"app__header-image\" src={Logo} alt=\"\" /></a>\n            <div className=\"nav\">\n                { user ? ( // check if user is signed in or not. ? (...) : (...) is an if-else statement\n                    <Button \n                        style={{\n                            fontSize: \"15px\",\n                            color: \"#edeae5\"\n                        }}\n                        onClick={() => auth.signOut()}\n                    >\n                        Log Out\n                    </Button>\n                ) : (\n                    <div>\n                        <Button \n                            style={{\n                                fontSize: \"15px\",\n                                color: \"#edeae5\"\n                            }}\n                            onClick={() => setOpenLogIn(true)}\n                        >\n                            Log In\n                        </Button>\n\n                        <Button \n                            style={{\n                                fontSize: \"15px\",\n                                color: \"#edeae5\"\n                            }}\n                            onClick={() => setOpen(true)}\n                        >\n                            Register\n                        </Button>\n                    </div>\n                )}\n            </div>\n        </div>\n\n        <div className=\"app__upload\">\n            {user?.displayName ? ( // the ? is an optional, basically a try catch statement\n                <UploadImage username={user.displayName}/>\n            ) : (\n                <div />\n            )}\n        </div>\n    \n        {\n            posts.map(({id, post}) => (\n                <Post key={id} postId={id} user={user} username={post.username} caption={post.caption} imageUrl={post.imageUrl}/>\n            ))\n        }\n\n        </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}